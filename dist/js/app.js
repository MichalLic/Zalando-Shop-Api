var CartControl={$CART_BLOCK:$(".cart-block"),init:function(){Zalando.getPreviouslyPage(Zalando.$BTN_PREV),CartControl.drawCartDetail(),CartControl.onRemoveLocalStorageItem(),CartControl.removeAllItems()},addProductToCart:function(t){var e=CartControl.getProductQuantity(),o={id:t.id,name:t.name,price:t.units[0].price.value,currency:"Â£",img:t.media.images[0].thumbnailHdUrl,quantity:e};if(""===Zalando.PRODUCTS_LOCAL_STORAGE)console.log("dodaje pierwszy produkt do pustego koszyka"),Zalando.PRODUCTS_LOCAL_STORAGE.push(o);else{var a=!1;$.each(Zalando.PRODUCTS_LOCAL_STORAGE,function(t,r){o.id===r.id&&(console.log("dodaje pierwszy lecz koszyk NIE BYL pusty"),console.log("increment product quantity"),r.quantity+=e,a=!0)}),!1===a&&(console.log("dodaje produkt ktorego nie bylo w koszyku a on mial juz produkty"),Zalando.PRODUCTS_LOCAL_STORAGE.push(o))}localStorage.setItem("products",JSON.stringify(Zalando.PRODUCTS_LOCAL_STORAGE)),CartControl.drawCartDetail()},getProductQuantity:function(){var t=$("#quantity").val();return Number(t)},drawCartDetail:function(){var t="";$.map(Zalando.PRODUCTS_LOCAL_STORAGE,function(e){t+='<div class="cart-product-detail">',t+='<span><a href="product.html#'+e.id+'">'+e.name+"</a></span>",t+="<span><b>"+e.currency+e.price*e.quantity+"</b></span>",t+='<span><img src="'+e.img+'"></span>',t+="<span><b>QTY</b>:"+e.quantity+"</span>",t+='<a href="#" data-id="'+e.id+'" class="btn-remove-item"><i class="fa fa-times" aria-hidden="true"></i></a>',t+="</div>"}),CartControl.$CART_BLOCK.html(t),CartControl.emptyCartMessage(),""!==t?CartControl.addRemovedButton():$(".btn-remove-items").remove()},getProductDetailToCart:function(t){$.ajax({url:Zalando.URL+t,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){CartControl.addProductToCart(t)},error:function(){alert("Error getting data")}})},onPutToCart:function(t){t.on("click",function(t){t.preventDefault();var e=localStorage.getItem("id").replace(/['"]+/g,"");ProductControl.activeLoader(),Zalando.scrollToTop(),ProductControl.showMessage(),CartControl.getProductDetailToCart(e),ProductControl.inactiveLoader()})},emptyCartMessage:function(){CartControl.$CART_BLOCK.is(":empty")&&CartControl.$CART_BLOCK.append('<p class="cart-message-empty">Your basket is currently empty!</p>')},onRemoveLocalStorageItem:function(){CartControl.$CART_BLOCK.on("click",".btn-remove-item",function(t){t.preventDefault();for(var e=0;e<Zalando.PRODUCTS_LOCAL_STORAGE.length;e++)Zalando.PRODUCTS_LOCAL_STORAGE[e].id===$(this).attr("data-id")&&(localStorage.removeItem(Zalando.PRODUCTS_LOCAL_STORAGE.splice(e,1)),localStorage.setItem("products",JSON.stringify(Zalando.PRODUCTS_LOCAL_STORAGE)),CartControl.drawCartDetail())})},addRemovedButton:function(){$(".remove-block").html('<a href="#" class="btn-remove-items">Remove all</a>')},removeAllItems:function(){$("main").on("click",".btn-remove-items",function(t){t.preventDefault(),localStorage.setItem("products",JSON.stringify("")),Zalando.refreshProductsCollection(),CartControl.drawCartDetail()})}},Filter={$FILTER_INPUT:$("#filter-input"),$PRODUCT_SECTION:$(".products-section"),init:function(t){Filter.filterProducts(t),Filter.createArrayProducts(t)},filterProducts:function(t){Filter.$FILTER_INPUT.on("keyup",function(){var e=this.value;if(Filter.$PRODUCT_SECTION.empty(),""!==e){var o=new RegExp(e,"gi");Filter.createArrayProducts(t).filter(function(t){t.name.match(o)&&Filter.renderProduct(t)})}else Zalando.getSingleElement(t)})},renderProduct:function(t){var e=$("#filter-product").html();Mustache.parse(e);var o=Mustache.render(e,t);$(".products-section").append(o)},createArrayProducts:function(t){var e=new Array;return $.map(t.content,function(t){e.push(t)}),e}},ProductControl={$OWL_CAROUSEL:$(".owl-carousel"),$CART_MODAL:$(".cart-modal"),$ADD_LINK:$(".add-link"),init:function(){var t=ProductControl.getProductId();ProductControl.getProductDetail(t),Zalando.getPreviouslyPage(Zalando.$BTN_PREV)},getProductId:function(){return window.location.hash.split("#")[1]},renderedMustacheProduct:function(t){var e=$("#product-detail").html();Mustache.parse(e);var o=Mustache.render(e,t);$(".product-detail").html(o)},renderedMustacheOwlCarousel:function(t){var e=$("#owl-carousel").html();Mustache.parse(e);var o=Mustache.render(e,t);$("#owl-product").append(o)},getProductDetail:function(t){$.ajax({url:Zalando.URL+t,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){console.log(t),ProductControl.renderedMustacheProduct(t),ProductControl.renderedMustacheOwlCarousel(t),localStorage.setItem("id",JSON.stringify(t.id)),ProductControl.owlCarousel(),ProductControl.owlRefresh(),CartControl.drawCartDetail(),CartControl.onPutToCart($(".add-link"))},error:function(){alert("Error getting data")}})},showMessage:function(){ProductControl.$CART_MODAL.addClass("show"),setTimeout(function(){ProductControl.$CART_MODAL.removeClass("show")},4e3)},activeLoader:function(){$(".add-link").css("pointer-events","none"),$(".spinner").removeClass("hide")},inactiveLoader:function(){$(".add-link").css("pointer-events","auto"),$(".spinner").addClass("hide")},owlCarousel:function(){ProductControl.$OWL_CAROUSEL.owlCarousel({items:1,singleItem:!0,autoplay:!0,autoplayHoverPause:!0,dots:!1,loop:!0,margin:10,mouseDrag:!0,nav:!0,smartSpeed:1e3,navText:['<i class="fa fa-chevron-left" aria-hidden="true"></i>','<i class="fa fa-chevron-right" aria-hidden="true"></i>']})},owlRefresh:function(){ProductControl.$OWL_CAROUSEL.trigger("refresh.owl.carousel")}},Zalando={URL:"https://api.zalando.com/articles/",$PRODUCTS:$("#products"),$CATEGORY_LINK:$(".category-link"),$PRODUCTS_SECTION:$(".products-section"),PRODUCT_DETAIL:"product-detail",$BTN_PREV:$(".btn-prev"),PRODUCTS_LOCAL_STORAGE:JSON.parse(localStorage.getItem("products"))||[],init:function(){Zalando.getProducts(!1),Zalando.onInitTrueFunction(Zalando.$CATEGORY_LINK)},getProducts:function(t,e){var o=!0===t?e:"";$.ajax({url:Zalando.URL+o,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){console.log(t),$(".product-link").remove(),Zalando.getSingleElement(t),Filter.init(t)},error:function(){alert("Error getting data")}})},onInitTrueFunction:function(t){t.on("click",function(t){t.preventDefault(),Zalando.getProducts(!0,Zalando.returnFilteredDataUrl(this))})},returnFilteredDataUrl:function(t){return"?"+$.param(t.dataset)},getSingleElement:function(t){$.map(t.content,function(t){Zalando.renderedMustache(t,Zalando.$PRODUCTS,Zalando.$PRODUCTS_SECTION)})},renderedMustache:function(t,e,o){var a=e.html();Mustache.parse(a);var r=Mustache.render(a,t);o.append(r)},getPreviouslyPage:function(t){t.on("click",function(){window.history.back()})},scrollToTop:function(){$("html, body").animate({scrollTop:0},"slow")},refreshProductsCollection:function(){Zalando.PRODUCTS_LOCAL_STORAGE=JSON.parse(localStorage.getItem("products"))}};
//# sourceMappingURL=app.js.map

var CartControl={$CART_BLOCK:$(".cart-block"),init:function(){Zalando.getPreviouslyPage(Zalando.$BTN_PREV),CartControl.drawCartDetail(),CartControl.onRemoveLocalStorageItem(),CartControl.removeAllItems()},addProductToCart:function(t){var o=CartControl.getProductQuantity(),e={id:t.id,name:t.name,price:t.units[0].price.value,currency:"Â£",img:t.media.images[0].thumbnailHdUrl,quantity:o};if(""===Zalando.PRODUCTS_LOCAL_STORAGE)console.log("dodaje pierwszy produkt do pustego koszyka"),Zalando.PRODUCTS_LOCAL_STORAGE.push(e);else{var a=!1;$.each(Zalando.PRODUCTS_LOCAL_STORAGE,function(t,r){e.id===r.id&&(console.log("dodaje pierwszy lecz koszyk NIE BYL pusty"),console.log("increment product quantity"),r.quantity+=o,a=!0)}),!1===a&&(console.log("dodaje produkt ktorego nie bylo w koszyku a on mial juz produkty"),Zalando.PRODUCTS_LOCAL_STORAGE.push(e))}localStorage.setItem("products",JSON.stringify(Zalando.PRODUCTS_LOCAL_STORAGE)),CartControl.drawCartDetail()},getProductQuantity:function(){var t=$("#quantity").val();return Number(t)},drawCartDetail:function(){var t="";$.map(Zalando.PRODUCTS_LOCAL_STORAGE,function(o){t+='<div class="cart-product-detail">',t+='<span><a href="product.html#'+o.id+'">'+o.name+"</a></span>",t+="<span><b>"+o.currency+o.price*o.quantity+"</b></span>",t+='<span><img src="'+o.img+'"></span>',t+="<span><b>QTY</b>:"+o.quantity+"</span>",t+='<a href="#" data-id="'+o.id+'" class="btn-remove-item"><i class="fa fa-times" aria-hidden="true"></i></a>',t+="</div>"}),CartControl.$CART_BLOCK.html(t),CartControl.emptyCartMessage(),""!==t?CartControl.addRemovedButton():$(".btn-remove-items").remove()},getProductDetailToCart:function(t){$.ajax({url:Zalando.URL+t,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){CartControl.addProductToCart(t)},error:function(){alert("Error getting data")}})},onPutToCart:function(t){t.on("click",function(t){t.preventDefault();var o=localStorage.getItem("id").replace(/['"]+/g,"");ProductControl.activeLoader(),Zalando.scrollToTop(),ProductControl.showMessage(),CartControl.getProductDetailToCart(o),ProductControl.inactiveLoader()})},emptyCartMessage:function(){CartControl.$CART_BLOCK.is(":empty")&&CartControl.$CART_BLOCK.append('<p class="cart-message-empty">Your basket is currently empty!</p>')},onRemoveLocalStorageItem:function(){CartControl.$CART_BLOCK.on("click",".btn-remove-item",function(t){t.preventDefault();for(var o=0;o<Zalando.PRODUCTS_LOCAL_STORAGE.length;o++)Zalando.PRODUCTS_LOCAL_STORAGE[o].id===$(this).attr("data-id")&&(localStorage.removeItem(Zalando.PRODUCTS_LOCAL_STORAGE.splice(o,1)),localStorage.setItem("products",JSON.stringify(Zalando.PRODUCTS_LOCAL_STORAGE)),CartControl.drawCartDetail())})},addRemovedButton:function(){$(".remove-block").html('<a href="#" class="btn-remove-items">Remove all</a>')},removeAllItems:function(){$("main").on("click",".btn-remove-items",function(t){t.preventDefault(),localStorage.setItem("products",JSON.stringify("")),Zalando.refreshProductsCollection(),CartControl.drawCartDetail()})}},ProductControl={$OWL_CAROUSEL:$(".owl-carousel"),$CART_MODAL:$(".cart-modal"),$ADD_LINK:$(".add-link"),init:function(){var t=ProductControl.getProductId();ProductControl.getProductDetail(t),Zalando.getPreviouslyPage(Zalando.$BTN_PREV)},getProductId:function(){return window.location.hash.split("#")[1]},renderedMustacheProduct:function(t){var o=$("#product-detail").html();Mustache.parse(o);var e=Mustache.render(o,t);$(".product-detail").html(e)},renderedMustacheOwlCarousel:function(t){var o=$("#owl-carousel").html();Mustache.parse(o);var e=Mustache.render(o,t);$("#owl-product").append(e)},getProductDetail:function(t){$.ajax({url:Zalando.URL+t,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){console.log(t),ProductControl.renderedMustacheProduct(t),ProductControl.renderedMustacheOwlCarousel(t),localStorage.setItem("id",JSON.stringify(t.id)),ProductControl.owlCarousel(),ProductControl.owlRefresh(),CartControl.drawCartDetail(),CartControl.onPutToCart($(".add-link"))},error:function(){alert("Error getting data")}})},showMessage:function(){ProductControl.$CART_MODAL.addClass("show"),setTimeout(function(){ProductControl.$CART_MODAL.removeClass("show")},4e3)},activeLoader:function(){$(".add-link").css("pointer-events","none"),$(".spinner").removeClass("hide")},inactiveLoader:function(){$(".add-link").css("pointer-events","auto"),$(".spinner").addClass("hide")},owlCarousel:function(){ProductControl.$OWL_CAROUSEL.owlCarousel({items:1,singleItem:!0,autoplay:!0,autoplayHoverPause:!0,dots:!1,loop:!0,margin:10,mouseDrag:!0,nav:!0,smartSpeed:1e3,navText:['<i class="fa fa-chevron-left" aria-hidden="true"></i>','<i class="fa fa-chevron-right" aria-hidden="true"></i>']})},owlRefresh:function(){ProductControl.$OWL_CAROUSEL.trigger("refresh.owl.carousel")}},Zalando={URL:"https://api.zalando.com/articles/",$PRODUCTS:$("#products"),$CATEGORY_LINK:$(".category-link"),$PRODUCTS_SECTION:$(".products-section"),PRODUCT_DETAIL:"product-detail",$BTN_PREV:$(".btn-prev"),PRODUCTS_LOCAL_STORAGE:JSON.parse(localStorage.getItem("products"))||[],init:function(){Zalando.getProducts(!1),Zalando.onInitTrueFunction(Zalando.$CATEGORY_LINK)},getProducts:function(t,o){var e=!0===t?o:"";$.ajax({url:Zalando.URL+e,method:"get",dataType:"JSON",headers:{"Accept-Language":"en"},success:function(t){console.log(t),$(".product-link").remove(),Zalando.getSingleElement(t)},error:function(){alert("Error getting data")}})},onInitTrueFunction:function(t){t.on("click",function(t){t.preventDefault(),Zalando.getProducts(!0,Zalando.returnFilteredDataUrl(this))})},returnFilteredDataUrl:function(t){return"?"+$.param(t.dataset)},getSingleElement:function(t){$.map(t.content,function(t){Zalando.renderedMustache(t,Zalando.$PRODUCTS,Zalando.$PRODUCTS_SECTION)})},renderedMustache:function(t,o,e){var a=o.html();Mustache.parse(a);var r=Mustache.render(a,t);e.append(r)},getPreviouslyPage:function(t){t.on("click",function(){window.history.back()})},scrollToTop:function(){$("html, body").animate({scrollTop:0},"slow")},refreshProductsCollection:function(){Zalando.PRODUCTS_LOCAL_STORAGE=JSON.parse(localStorage.getItem("products"))}};
//# sourceMappingURL=app.js.map
